<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>SpringBoot学习笔记 | 哑舍</title><meta name="description" content="SpringBoot学习笔记"><meta name="keywords" content="Spring"><meta name="author" content="Machine"><meta name="copyright" content="Machine"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/cat2.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="SpringBoot学习笔记"><meta name="twitter:description" content="SpringBoot学习笔记"><meta name="twitter:image" content="https://machine4869.gitee.io/img/default_p5.jpeg"><meta property="og:type" content="article"><meta property="og:title" content="SpringBoot学习笔记"><meta property="og:url" content="https://machine4869.gitee.io/2018/05/18/15326725480153/"><meta property="og:site_name" content="哑舍"><meta property="og:description" content="SpringBoot学习笔记"><meta property="og:image" content="https://machine4869.gitee.io/img/default_p5.jpeg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://machine4869.gitee.io/2018/05/18/15326725480153/"><link rel="prev" title="笔记-数据结构" href="https://machine4869.gitee.io/2018/05/18/15326692970995/"><link rel="next" title="笔记-微信小程序学习" href="https://machine4869.gitee.io/2018/05/17/15326693355030/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://machine4869.gitee.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">哑舍</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 豆瓣电影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> 照片墙</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">134</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">27</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">45</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 豆瓣电影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> 照片墙</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#1-Spring-Boot开始"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">1 Spring Boot开始</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-1-SpringBoot介绍"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">1.1 SpringBoot介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-2-第一个SpringBoot应用"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">1.2 第一个SpringBoot应用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-3-项目属性配置"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">1.3 项目属性配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#两种配置文件"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">两种配置文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#自定义的属性"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">自定义的属性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#多环境配置"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">多环境配置</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-4-Controller的简单使用"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">1.4 Controller的简单使用</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#获取参数"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">获取参数</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#2-SpringBoot运行原理"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">2 SpringBoot运行原理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-1-自动配置"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">2.1 自动配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-2-运作原理"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">2.2 运作原理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-3-核心注解"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">2.3 核心注解</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-4-实例分析：http的编码配置"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">2.4 实例分析：http的编码配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-5-实战：给自定义类实现自动配置"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">2.5 实战：给自定义类实现自动配置</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#3-SpringBoot开发干货"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">3 SpringBoot开发干货</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-1-Thymeleaf模版引擎"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">3.1 Thymeleaf模版引擎</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Thymeleaf基础知识"><span class="toc_mobile_items-number">3.1.1.</span> <span class="toc_mobile_items-text">Thymeleaf基础知识</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#与SpringMVC集成"><span class="toc_mobile_items-number">3.1.2.</span> <span class="toc_mobile_items-text">与SpringMVC集成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#SpringBoot的Thymeleaf支持"><span class="toc_mobile_items-number">3.1.3.</span> <span class="toc_mobile_items-text">SpringBoot的Thymeleaf支持</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#实战"><span class="toc_mobile_items-number">3.1.4.</span> <span class="toc_mobile_items-text">实战</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-2-SpringBoot整合Mybatis"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">3.2 SpringBoot整合Mybatis</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#基本整合"><span class="toc_mobile_items-number">3.2.1.</span> <span class="toc_mobile_items-text">基本整合</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#关于事务"><span class="toc_mobile_items-number">3.2.2.</span> <span class="toc_mobile_items-text">关于事务</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#逆向工程"><span class="toc_mobile_items-number">3.2.3.</span> <span class="toc_mobile_items-text">逆向工程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#分页插件"><span class="toc_mobile_items-number">3.2.4.</span> <span class="toc_mobile_items-text">分页插件</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-3-统一异常处理器"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">3.3 统一异常处理器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-4-开发热部署"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">3.4 开发热部署</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-5-项目部署到linux"><span class="toc_mobile_items-number">3.5.</span> <span class="toc_mobile_items-text">3.5 项目部署到linux</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#jar形式"><span class="toc_mobile_items-number">3.5.1.</span> <span class="toc_mobile_items-text">jar形式</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring-Boot开始"><span class="toc-number">1.</span> <span class="toc-text">1 Spring Boot开始</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-SpringBoot介绍"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 SpringBoot介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-第一个SpringBoot应用"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 第一个SpringBoot应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-项目属性配置"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 项目属性配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#两种配置文件"><span class="toc-number">1.3.1.</span> <span class="toc-text">两种配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义的属性"><span class="toc-number">1.3.2.</span> <span class="toc-text">自定义的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多环境配置"><span class="toc-number">1.3.3.</span> <span class="toc-text">多环境配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Controller的简单使用"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 Controller的简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取参数"><span class="toc-number">1.4.1.</span> <span class="toc-text">获取参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-SpringBoot运行原理"><span class="toc-number">2.</span> <span class="toc-text">2 SpringBoot运行原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-自动配置"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 自动配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-运作原理"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 运作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-核心注解"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 核心注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-实例分析：http的编码配置"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 实例分析：http的编码配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-实战：给自定义类实现自动配置"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 实战：给自定义类实现自动配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-SpringBoot开发干货"><span class="toc-number">3.</span> <span class="toc-text">3 SpringBoot开发干货</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Thymeleaf模版引擎"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Thymeleaf模版引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Thymeleaf基础知识"><span class="toc-number">3.1.1.</span> <span class="toc-text">Thymeleaf基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#与SpringMVC集成"><span class="toc-number">3.1.2.</span> <span class="toc-text">与SpringMVC集成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot的Thymeleaf支持"><span class="toc-number">3.1.3.</span> <span class="toc-text">SpringBoot的Thymeleaf支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实战"><span class="toc-number">3.1.4.</span> <span class="toc-text">实战</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-SpringBoot整合Mybatis"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 SpringBoot整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本整合"><span class="toc-number">3.2.1.</span> <span class="toc-text">基本整合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于事务"><span class="toc-number">3.2.2.</span> <span class="toc-text">关于事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#逆向工程"><span class="toc-number">3.2.3.</span> <span class="toc-text">逆向工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页插件"><span class="toc-number">3.2.4.</span> <span class="toc-text">分页插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-统一异常处理器"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 统一异常处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-开发热部署"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 开发热部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-项目部署到linux"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 项目部署到linux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jar形式"><span class="toc-number">3.5.1.</span> <span class="toc-text">jar形式</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(/img/default_p5.jpeg)"><div id="post-info"><div id="post-title"><div class="posttitle">SpringBoot学习笔记</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2018-05-18<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2019-11-28</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Spring/">Spring</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Spring/SpringBoot/">SpringBoot</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.3k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 15 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2018/05/18/15326725480153/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2018/05/18/15326725480153/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><blockquote>
<p>​    笔记参考：</p>
<p>​    慕课网【2小时学会SpringBoot】</p>
<p>​    《JavaEE开发的颠覆者 Spring Boot实战 》</p>
</blockquote>
<p>[TOC]</p>
<h1 id="1-Spring-Boot开始"><a href="#1-Spring-Boot开始" class="headerlink" title="1 Spring Boot开始"></a>1 Spring Boot开始</h1><h2 id="1-1-SpringBoot介绍"><a href="#1-1-SpringBoot介绍" class="headerlink" title="1.1 SpringBoot介绍"></a>1.1 SpringBoot介绍</h2><pre><code>- SpringBoot和SpringMVC的关系：SpringBoot是SpringMVC的升级版，两者没有必然的联系
- SpringBoot的特点
    1.化繁为简，简化配置
    2.备受关注，是下一代框架
    3.微服务的入门级微框架
- 微服务
    SpringBoot -&gt; SpringCloud -&gt; 微服务

- 课程目录
    1.第一个SpringBoot程序
- 官方文档：https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/reference/html/  </code></pre><h2 id="1-2-第一个SpringBoot应用"><a href="#1-2-第一个SpringBoot应用" class="headerlink" title="1.2 第一个SpringBoot应用"></a>1.2 第一个SpringBoot应用</h2><p>使用IntelliJ IDEA</p>
<p>具体步骤：</p>
<pre><code>new prpject
-&gt; spring initializr 
-&gt;Defaut
-&gt; web--&gt;web</code></pre><blockquote>
<p>应用创建成功后，会生成相应的目录和文件。<br>其中有一个Application类,它是程序的入口:表示启动springboot</p>
</blockquote>
<pre><code>@SpringBootApplication
public class FirstspringbootApplication {

    public static void main(String[] args) {
        SpringApplication.run(FirstspringbootApplication.class, args);
    }
}</code></pre><p>springboot就是一个maven工程</p>
<p>写一个HelloController：</p>
<pre><code>@RestController     //等同于同时加上了@Controller和@ResponseBody
public class HelloController {

    @RequestMapping(&quot;/hello&quot;)
    public String say(){
        return &quot;hello spring boot&quot;;
    }
}</code></pre><blockquote>
<p>运行 Application的main(),会启动,由于springboot自动内置了servlet容器，所以不需要类似传统的方式，先部署到容器再启动容器。</p>
</blockquote>
<blockquote>
<p><a href="http://localhost:8080/hello" target="_blank" rel="noopener">http://localhost:8080/hello</a>, 就可以在浏览器上看到</p>
</blockquote>
<blockquote>
<p><strong>Application</strong>启动类类放在最外侧,即包含所有子包</p>
<p>原因:spring-boot会自动加载启动类所在包下及其子包下的所有组件.</p>
</blockquote>
<p><strong>其他启动项目的方式：</strong></p>
<pre><code>2. 进入项目根目录，在命令行写：
        mvn spring-boot:run
3. 进入项目&gt;target目录，有jar文件
        java -jar myspringboot-0.0.1-SNAPAHOT.jar</code></pre><h2 id="1-3-项目属性配置"><a href="#1-3-项目属性配置" class="headerlink" title="1.3 项目属性配置"></a>1.3 项目属性配置</h2><h3 id="两种配置文件"><a href="#两种配置文件" class="headerlink" title="两种配置文件"></a>两种配置文件</h3><p>默认application.properties文件</p>
<pre><code>server.port=8081
server.context-path=/sb</code></pre><p>推荐application.yml<br>​<br>    server:<br>        port: 8081<br>        servlet:<br>          context-path: /sb</p>
<blockquote>
<p>port:[空格]8081 ，yml语法必须有空格</p>
</blockquote>
<p>访问：<a href="http://localhost:8081/sb/hello" target="_blank" rel="noopener">http://localhost:8081/sb/hello</a></p>
<h3 id="自定义的属性"><a href="#自定义的属性" class="headerlink" title="自定义的属性"></a>自定义的属性</h3><p>yml:</p>
<pre><code>server:
  port: 8080
  context-path: /sb

girl:
  name: B
  age: 18
  content: &quot;name: ${name},age: ${age}&quot;</code></pre><p>pojo:</p>
<pre><code>@ConfigurationProperties(prefix = &quot;girl&quot;) //将yml文件中前缀为girl 的属性 注入到 此类
@Component  //bean交给Spring管理
public class Girl {
    private String name;
    private String age;
    private String content;
    //set get
}</code></pre><p>controller:</p>
<pre><code>@RestController
public class HelloController {

    //注入配置文件里的name值
    @Value(&quot;${girl.name}&quot;)
    private String name;

    //自动注入
    @Autowired
    private Girl girl;

    @RequestMapping(&quot;/hello&quot;)
    public String say(){
        String s = name+&quot;====&quot;+girl;
        return s;
    }
}</code></pre><h3 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h3><p>application.yml</p>
<pre><code>spring:
  profiles:
    active: dev</code></pre><p>用于开发环境的application-dev.yml</p>
<pre><code>server:
    port: 8081
    servlet:
      context-path: /sb

girl:
  name: 大白
  age: 18
  content: &quot;name: ${girl.name},age: ${girl.age}&quot;</code></pre><h2 id="1-4-Controller的简单使用"><a href="#1-4-Controller的简单使用" class="headerlink" title="1.4 Controller的简单使用"></a>1.4 Controller的简单使用</h2><pre><code>@Controller
@RestController: Spring4引入，@Controller+ @ResponseBody
@RequestMapping</code></pre><h3 id="获取参数"><a href="#获取参数" class="headerlink" title="获取参数"></a>获取参数</h3><pre><code>@PathVariable: 获取url中的数据
@RequestParam：获取请求参数的值 
@GetMapping: 组合注解</code></pre><p>@PathVariable</p>
<pre><code>@RequestMapping(&quot;/hello/{id}&quot;)
public String say(@PathVariable Integer id){

    return id.toString();
}</code></pre><blockquote>
<p>url:<a href="http://localhost:8081/sb/hello/1357" target="_blank" rel="noopener">http://localhost:8081/sb/hello/1357</a></p>
</blockquote>
<p>@RequestParam</p>
<p>若url格式为 <a href="http://localhost:8081/sb/hello?id=100" target="_blank" rel="noopener">http://localhost:8081/sb/hello?id=100</a></p>
<p>则使用@RequestParam</p>
<pre><code>@RequestMapping(&quot;/hello&quot;)
public String say(@RequestParam(&quot;id&quot;) Integer id){

    return id.toString();
}</code></pre><p>@GetMapping,@PostMapping</p>
<pre><code>是组合注解，@GetMapping=@RequestMapping(method=RequestMethod.GET)</code></pre><h1 id="2-SpringBoot运行原理"><a href="#2-SpringBoot运行原理" class="headerlink" title="2 SpringBoot运行原理"></a>2 SpringBoot运行原理</h1><h2 id="2-1-自动配置"><a href="#2-1-自动配置" class="headerlink" title="2.1 自动配置"></a>2.1 自动配置</h2><p>自动配置原理：基于条件配置bean</p>
<p>关于自动配置的源码包：</p>
<p><a href="/2018/05/18/15326725480153/1.png" data-fancybox="group" data-caption="1" class="fancybox"><img alt="1" title="1" data-src="/2018/05/18/15326725480153/1.png" class="lazyload"></a></p>
<p>查看启用和未启用的自动配置：</p>
<p>​    在yml文件中添加。debug: true</p>
<p>​    启动后控制台会输出Positive matches:（已启用）和Negative matches:（未启用）</p>
<h2 id="2-2-运作原理"><a href="#2-2-运作原理" class="headerlink" title="2.2 运作原理"></a>2.2 运作原理</h2><p>@SpringBootApplication注解是一个组合注解，源码如下</p>
<p><a href="/2018/05/18/15326725480153/2.png" data-fancybox="group" data-caption="2" class="fancybox"><img alt="2" title="2" data-src="/2018/05/18/15326725480153/2.png" class="lazyload"></a></p>
<p>它的核心功能由@EnableAutoConfiguration提供。@EnableAutoConfiguration源码如下：</p>
<p><a href="/2018/05/18/15326725480153/3.png" data-fancybox="group" data-caption="3" class="fancybox"><img alt="3" title="3" data-src="/2018/05/18/15326725480153/3.png" class="lazyload"></a></p>
<p>AutoConfigurationImportSelector使用SpringFactoriesLoader.loadFactoryNames方法扫描具有META-INF/spring.factories文件的jar包。</p>
<p>打开spring-boot-autoconfigure-2.0.2.RELEASE.jar的spring.factories，查看文件中声明了哪些自动配置</p>
<p><a href="/2018/05/18/15326725480153/4.png" data-fancybox="group" data-caption="4" class="fancybox"><img alt="4" title="4" data-src="/2018/05/18/15326725480153/4.png" class="lazyload"></a></p>
<h2 id="2-3-核心注解"><a href="#2-3-核心注解" class="headerlink" title="2.3 核心注解"></a>2.3 核心注解</h2><p>简单分析@ConditionalOnWebApplication注解</p>
<p><a href="/2018/05/18/15326725480153/5.png" data-fancybox="group" data-caption="5" class="fancybox"><img alt="5" title="5" data-src="/2018/05/18/15326725480153/5.png" class="lazyload"></a></p>
<p>能看出，此注解使用的条件是：OnWebApplicationCondition，下面看这个条件是如何构造的，</p>
<p>​    从isWebApplication方法可以看出判断条件</p>
<h2 id="2-4-实例分析：http的编码配置"><a href="#2-4-实例分析：http的编码配置" class="headerlink" title="2.4 实例分析：http的编码配置"></a>2.4 实例分析：http的编码配置</h2><p>分析一个简单的springboot内置自动配置功能：http的编码配置</p>
<p>常规：在web.xml中配置filter:</p>
<p><a href="/2018/05/18/15326725480153/6.png" data-fancybox="group" data-caption="6" class="fancybox"><img alt="6" title="6" data-src="/2018/05/18/15326725480153/6.png" class="lazyload"></a></p>
<p>自动配置要满足的条件：</p>
<p>1）能配置CharaterEncodingFilter这个类</p>
<p>2）能配置encoding和farceEncoding两个参数</p>
<p><strong>1. 配置参数</strong></p>
<p>查看源码</p>
<p><a href="/2018/05/18/15326725480153/7.png" data-fancybox="group" data-caption="7" class="fancybox"><img alt="7" title="7" data-src="/2018/05/18/15326725480153/7.png" class="lazyload"></a></p>
<p>![屏幕快照 2018-05-18 下午9.36.14](/Users/machine/Desktop/屏幕快照 2018-05-18 下午9.36.14.png)</p>
<p>代码说明：</p>
<p>​    1）在application.yml文件中的前缀是 spring.http.encoding</p>
<p>​    2）默认编码为UTF-8，若要修改，则使用spring.http.encoding.charset=”编码”</p>
<p><strong>2.配置bean</strong></p>
<p><a href="/2018/05/18/15326725480153/8.png" data-fancybox="group" data-caption="8" class="fancybox"><img alt="8" title="8" data-src="/2018/05/18/15326725480153/8.png" class="lazyload"></a></p>
<p>代码解释：</p>
<p>​    1）EnableConfigurationProperties属性注入</p>
<p>​    2）基于条件配置bean: ConditionalOnXXXX</p>
<h2 id="2-5-实战：给自定义类实现自动配置"><a href="#2-5-实战：给自定义类实现自动配置" class="headerlink" title="2.5 实战：给自定义类实现自动配置"></a>2.5 实战：给自定义类实现自动配置</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 自己写一个自动配置 和 starter pom</span><br><span class="line">- 要求：某个类存在时，自动配置这个类的bean，并可在applicarion.properties中设置bean</span><br><span class="line">- 源码文件：springbootstarterhelllo</span><br></pre></td></tr></table></figure></div>

<p>(1)新建maven工程</p>
<p>(2)在pom中添加</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>(3)属性配置</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String MSG = <span class="string">"world"</span>; <span class="comment">//默认配置</span></span><br><span class="line">    <span class="keyword">private</span> String msg = MSG;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(4)判断依据类: 根据此类存在与否来，在创建这个类的bean</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String msg;<span class="comment">//就是要配置这个默认值（某个类的某个属性的默认值）</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello "</span>+msg;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(5)自动配置类：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(HelloProperties<span class="class">.<span class="keyword">class</span>)   //注入</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnClass</span>(<span class="title">Hello</span>.<span class="title">class</span>) //当路径下有指定类</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnProperty</span>(<span class="title">prefix</span> </span>= <span class="string">"hello"</span>,value = <span class="string">"enabled"</span>,matchIfMissing = <span class="keyword">true</span>)	<span class="comment">//指定属性书否有指定值</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloProperties helloProperties;<span class="comment">//已含hello属性的默认值</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        返回注入了默认值的Hello</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(Hello<span class="class">.<span class="keyword">class</span>) //当容器里没有指定<span class="title">bean</span></span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">Hello</span> <span class="title">hello</span>()</span>&#123;</span><br><span class="line">        Hello hello = <span class="keyword">new</span> Hello();</span><br><span class="line">        hello.setMsg(helloProperties.getMsg());</span><br><span class="line">        <span class="keyword">return</span> hello;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(6)注册配置</p>
<p><a href="/2018/05/18/15326725480153/9.png" data-fancybox="group" data-caption="9" class="fancybox"><img alt="9" title="9" data-src="/2018/05/18/15326725480153/9.png" class="lazyload"></a></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration&#x3D;\</span><br><span class="line">machine.hello.HelloAutoConfiguration</span><br></pre></td></tr></table></figure></div>

<p>(7)将以上项目发布到本地仓库，在springboot项目中添加依赖</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;machine&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-helllo&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></div>

<p>(8)使用starter</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span>     <span class="comment">//等同于同时加上了@Controller和@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Hello hello; <span class="comment">//通过spring自动配置完成的 属性默认值</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello "</span>+ hello.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(9)手动配置属性,在yml中添加</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello:</span><br><span class="line">    msg: machine</span><br></pre></td></tr></table></figure></div>



<h1 id="3-SpringBoot开发干货"><a href="#3-SpringBoot开发干货" class="headerlink" title="3 SpringBoot开发干货"></a>3 SpringBoot开发干货</h1><h2 id="3-1-Thymeleaf模版引擎"><a href="#3-1-Thymeleaf模版引擎" class="headerlink" title="3.1 Thymeleaf模版引擎"></a>3.1 Thymeleaf模版引擎</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. Spring Boot包括对以下模板引擎的自动配置支持：FreeMarker  Groovy  Thymeleaf  Mustache</span><br><span class="line">2. 如果可能，应避免使用JSP，当使用嵌入式servlet容器时，JSP有问题</span><br><span class="line">3. Spring Boot应用推荐Thymeleaf，完美支持SpringMVC</span><br></pre></td></tr></table></figure></div>

<h3 id="Thymeleaf基础知识"><a href="#Thymeleaf基础知识" class="headerlink" title="Thymeleaf基础知识"></a>Thymeleaf基础知识</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 是一个java类库，是xml&#x2F;css&#x2F;html模版引擎，作为MVC的View</span><br><span class="line">- 提供模块与springMVC集成，可完全替代JSP</span><br></pre></td></tr></table></figure></div>

<p>使用语法教程见【Thymeleaf常用.md】</p>
<h3 id="与SpringMVC集成"><a href="#与SpringMVC集成" class="headerlink" title="与SpringMVC集成"></a>与SpringMVC集成</h3><h3 id="SpringBoot的Thymeleaf支持"><a href="#SpringBoot的Thymeleaf支持" class="headerlink" title="SpringBoot的Thymeleaf支持"></a>SpringBoot的Thymeleaf支持</h3><p>springboot 通过哦org.springframework.boot.autoconfigure.thymeleaf实现自动配置</p>
<p>查看ThymeleafProperties源码，可以看到默认设置的属性，前缀为spring.thymeleaf</p>
<p>部分代码如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String prefix = <span class="string">"classpath:/templates/"</span>;	<span class="comment">//默认模版放置路径</span></span><br><span class="line"><span class="keyword">private</span> String suffix = <span class="string">".html"</span>;					<span class="comment">//默认后缀</span></span><br><span class="line"><span class="keyword">private</span> String mode = <span class="string">"HTML"</span>;</span><br><span class="line"><span class="keyword">private</span> Charset encoding;</span><br></pre></td></tr></table></figure></div>

<h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><p>(1)新增starter pom</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></div>

<p>(2)pojo</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(3)Controller</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">"黄老邪"</span>);</span><br><span class="line">    user.setAge(<span class="number">1024</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>(4)页面 classpath:resources/templates</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.name&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.age&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<h2 id="3-2-SpringBoot整合Mybatis"><a href="#3-2-SpringBoot整合Mybatis" class="headerlink" title="3.2 SpringBoot整合Mybatis"></a>3.2 SpringBoot整合Mybatis</h2><h3 id="基本整合"><a href="#基本整合" class="headerlink" title="基本整合"></a>基本整合</h3><blockquote>
<p> 使用mybatis官方提供的mybatis-spring-boot-starter方案</p>
<p>官网文档：<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/index.html" target="_blank" rel="noopener">http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/index.html</a></p>
<p>​           <a href="https://github.com/mybatis/spring-boot-starter/wiki/Quick-Start" target="_blank" rel="noopener">https://github.com/mybatis/spring-boot-starter/wiki/Quick-Start</a></p>
</blockquote>
<p>(1)starter pom : 选mybatis，mysql</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis.spring.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></div>

<p>(2)数据源</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;10.211.55.6:3306&#x2F;jdbc</span><br><span class="line">    username: machine</span><br><span class="line">    password: 4869</span><br><span class="line">    driver-class-name: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure></div>

<p>MyBatis-Spring-Boot-Starter将：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 自动检测现有的数据源</span><br><span class="line">- 自动将数据源注入SqlSessionFactory</span><br><span class="line">- 自动创建从SqlSessionFactory获取的SqlSessionTemplate实例</span><br><span class="line">- 自动扫描您的映射器，将它们链接到SqlSessionTemplate并将它们注册到Spring上下文，以便将它们注入到bean中</span><br></pre></td></tr></table></figure></div>

<p>(3)在启动类添加mapper包扫描</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(&quot;machine.springboot01.mapper&quot;)</span><br><span class="line">public class Springboot01Application &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">		SpringApplication.run(Springboot01Application.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>这样springboot启动时候会自动扫描包（不建议在每个mapper类中加@Mapper）</p>
<p>(4)Mapper类编写（基于注解，还有原始的基于xml的）</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM USER"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;	<span class="comment">//若字段相同，Results可以不写</span></span><br><span class="line">        <span class="meta">@Result</span>(property = <span class="string">"username"</span>,  column = <span class="string">"username"</span>),</span><br><span class="line">        <span class="meta">@Result</span>(property = <span class="string">"id"</span>, column = <span class="string">"id"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	<span class="doctag">@Select</span> 是查询类的注解，所有的查询均使用这个</span></span><br><span class="line"><span class="comment">    <span class="doctag">@Result</span> 修饰返回的结果集，关联实体类属性和数据库字段一一对应，如果实体类属性和数据库属性名保持一致，就不需要这个属性来修饰。</span></span><br><span class="line"><span class="comment">    <span class="doctag">@Insert</span> 插入数据库使用，直接传入实体类会自动解析属性到对应的值</span></span><br><span class="line"><span class="comment">    <span class="doctag">@Update</span> 负责修改，也可以直接传入对象</span></span><br><span class="line"><span class="comment">    <span class="doctag">@delete</span> 负责删除</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure></div>

<p>pojo</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">    private String id;</span><br><span class="line">    private String username;</span><br><span class="line">    private String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>table    </p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;USER&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;username&#96; varchar(20) DEFAULT NULL,</span><br><span class="line">  &#96;email&#96; varchar(40) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;5 DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure></div>

<p>(5)测试</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">Springboot01ApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFind</span><span class="params">()</span></span>&#123;</span><br><span class="line">		List&lt;User&gt; userList = userMapper.findAll();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="关于事务"><a href="#关于事务" class="headerlink" title="关于事务"></a>关于事务</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">springboot自动开启了JDBC事务管理，不需要手动添加</span><br><span class="line"></span><br><span class="line">只要在需要使用事务的类或方法上使用@Transactional注解</span><br></pre></td></tr></table></figure></div>

<h3 id="逆向工程"><a href="#逆向工程" class="headerlink" title="逆向工程"></a>逆向工程</h3><p>使用maven插件方式生成逆向工程</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">   &lt;groupId&gt;org.mybatis.generator&lt;&#x2F;groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">   &lt;version&gt;1.3.5&lt;&#x2F;version&gt;</span><br><span class="line">   &lt;configuration&gt;</span><br><span class="line">      &lt;configurationFile&gt;src&#x2F;main&#x2F;resources&#x2F;generatorConfig.xml&lt;&#x2F;configurationFile&gt;</span><br><span class="line">      &lt;verbose&gt;true&lt;&#x2F;verbose&gt;</span><br><span class="line">      &lt;overwrite&gt;true&lt;&#x2F;overwrite&gt;</span><br><span class="line">   &lt;&#x2F;configuration&gt;</span><br><span class="line">   &lt;executions&gt;</span><br><span class="line">      &lt;execution&gt;</span><br><span class="line">         &lt;id&gt;Generate MyBatis Artifacts&lt;&#x2F;id&gt;</span><br><span class="line">         &lt;goals&gt;</span><br><span class="line">            &lt;goal&gt;generate&lt;&#x2F;goal&gt;</span><br><span class="line">         &lt;&#x2F;goals&gt;</span><br><span class="line">      &lt;&#x2F;execution&gt;</span><br><span class="line">   &lt;&#x2F;executions&gt;</span><br><span class="line">   &lt;dependencies&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">         &lt;groupId&gt;org.mybatis.generator&lt;&#x2F;groupId&gt;</span><br><span class="line">         &lt;artifactId&gt;mybatis-generator-core&lt;&#x2F;artifactId&gt;</span><br><span class="line">         &lt;version&gt;1.3.5&lt;&#x2F;version&gt;</span><br><span class="line">      &lt;&#x2F;dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">         &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">         &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">         &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">      &lt;&#x2F;dependency&gt;</span><br><span class="line">   &lt;&#x2F;dependencies&gt;</span><br><span class="line">&lt;&#x2F;plugin&gt;</span><br></pre></td></tr></table></figure></div>

<p>在以上路径添加generatorConfig.xml</p>
<p>使用 mvn mybatis-generator:generate 或用IEDA即可</p>
<h3 id="分页插件"><a href="#分页插件" class="headerlink" title="分页插件"></a>分页插件</h3><p>pagehelper项目地址<a href="https://github.com/pagehelper" target="_blank" rel="noopener">https://github.com/pagehelper</a></p>
<p>​                    <a href="https://github.com/pagehelper/pagehelper-spring-boot" target="_blank" rel="noopener">https://github.com/pagehelper/pagehelper-spring-boot</a></p>
<p>pom</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分页插件 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.pagehelper&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.5&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></div>

<p>配置</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不需要配置，自动注入配置</span><br></pre></td></tr></table></figure></div>

<p>使用</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. PageHelper.startPage 静态方法调用</span></span><br><span class="line"><span class="comment">		- 参数说明：</span></span><br><span class="line"><span class="comment">				pageNum 开始页数</span></span><br><span class="line"><span class="comment">	  			pageSize 每页显示的数据条数</span></span><br><span class="line"><span class="comment">		- 使用方法：</span></span><br><span class="line"><span class="comment">				在你需要进行分页的 MyBatis 查询方法前调用 PageHelper.startPage 静态方法即可，紧跟在这个方法后的第一个MyBatis 查询方法会被进行分页。	</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	2. 使用PageInfo的用法</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPageHelper</span><span class="params">()</span></span>&#123; </span><br><span class="line">    PageHelper.startPage(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.findAll();<span class="comment">//结果userList里面只有2条数据</span></span><br><span class="line">    </span><br><span class="line">    PageInfo page = <span class="keyword">new</span> PageInfo(userList);<span class="comment">//用PageInfo对结果进行包装</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">		提供了很多属性</span></span><br><span class="line"><span class="comment">		page.getPageNum();</span></span><br><span class="line"><span class="comment">		page.getPageSize();</span></span><br><span class="line"><span class="comment">		page.getStartRow();//第一条记录的标号</span></span><br><span class="line"><span class="comment">		page.getEndRow();//最后一条记录的标号</span></span><br><span class="line"><span class="comment">		page.getTotal();//总记录数</span></span><br><span class="line"><span class="comment">		page.getPages();//总页数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="3-3-统一异常处理器"><a href="#3-3-统一异常处理器" class="headerlink" title="3.3 统一异常处理器"></a>3.3 统一异常处理器</h2><h2 id="3-4-开发热部署"><a href="#3-4-开发热部署" class="headerlink" title="3.4 开发热部署"></a>3.4 开发热部署</h2><p>基于IDEA的springboot热部署</p>
<p>1 关闭模版缓存</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  thymeleaf:</span><br><span class="line">      cache: false  # 关闭模版缓存，利于页面开发测试</span><br></pre></td></tr></table></figure></div>

<p>2 pom</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--热部署--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-devtools&lt;&#x2F;artifactId&gt;</span><br><span class="line">	&lt;optional&gt;true&lt;&#x2F;optional&gt;&lt;!--依赖不会传递--&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></div>

<p>3 IDEA设置</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. preperences &gt; Build ,Execution,Deplment &gt; compiler &gt; build project automatically</span><br><span class="line">2. cmd+shift+a &gt; 输入Registry回车 &gt; 勾选 complier.automake.allow.when.app.running</span><br></pre></td></tr></table></figure></div>

<p>效果：修改类 &gt; 会重启</p>
<h2 id="3-5-项目部署到linux"><a href="#3-5-项目部署到linux" class="headerlink" title="3.5 项目部署到linux"></a>3.5 项目部署到linux</h2><p> <strong>springboot部署到linux</strong></p>
<h3 id="jar形式"><a href="#jar形式" class="headerlink" title="jar形式"></a><strong>jar形式</strong></h3><p>1 打包：mvn package</p>
<p>2 测试运行：java -jar XXX.jar 即可</p>
<p>3 注册为linux服务</p>
<p>(1)修改spring-boot-maven-plugin</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br><span class="line">    &lt;plugin&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;configuration&gt;</span><br><span class="line">        	&lt;executable&gt;true&lt;&#x2F;executable&gt;</span><br><span class="line">        &lt;&#x2F;configuration&gt;</span><br><span class="line">    &lt;&#x2F;plugin&gt;</span><br><span class="line">&lt;&#x2F;plugins&gt;</span><br></pre></td></tr></table></figure></div>

<p>然后package打包</p>
<p>(2)注册为linux服务</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. linux安装jdk</span><br><span class="line">2. 上传jar</span><br><span class="line">3. 基于Systemd注册服务</span><br><span class="line">	见笔记【linux-基于Systemd注册服务】</span><br><span class="line">4. 开启服务</span><br><span class="line">	sudo systemctl start machine-bootdo</span><br></pre></td></tr></table></figure></div>





</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Machine</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://machine4869.gitee.io/2018/05/18/15326725480153/">https://machine4869.gitee.io/2018/05/18/15326725480153/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://machine4869.gitee.io">哑舍</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring/">Spring    </a></div><div class="post_share"><div class="social-share" data-image="/img/default_p5.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.png" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2018/05/18/15326692970995/"><img class="prev_cover lazyload" data-src="/img/default_p3.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>笔记-数据结构</span></div></a></div><div class="next-post pull_right"><a href="/2018/05/17/15326693355030/"><img class="next_cover lazyload" data-src="/img/default_p6.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>笔记-微信小程序学习</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2018/04/20/15326651794162/" title="Spring笔记（一）"><img class="relatedPosts_cover lazyload"data-src="/img/default_p8.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-04-20</div><div class="relatedPosts_title">Spring笔记（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2018/04/20/15326656335063/" title="SpringMVC笔记（二）"><img class="relatedPosts_cover lazyload"data-src="/img/default_p4.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-04-20</div><div class="relatedPosts_title">SpringMVC笔记（二）</div></div></a></div><div class="relatedPosts_item"><a href="/2018/04/20/15326654119854/" title="Spring笔记（二）"><img class="relatedPosts_cover lazyload"data-src="/img/default_p9.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-04-20</div><div class="relatedPosts_title">Spring笔记（二）</div></div></a></div><div class="relatedPosts_item"><a href="/2018/04/20/15326654830963/" title="SpringMVC笔记（一）"><img class="relatedPosts_cover lazyload"data-src="/img/default_p7.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-04-20</div><div class="relatedPosts_title">SpringMVC笔记（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2018/04/20/15326659380385/" title="Spring-RequestParam加与不加的区别"><img class="relatedPosts_cover lazyload"data-src="/img/default_p7.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-04-20</div><div class="relatedPosts_title">Spring-RequestParam加与不加的区别</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'yPVvDIaWlODDhs0bbECwLIIp-gzGzoHsz',
  appKey:'VyOIa40LxnjURzW1HUCiwTpV',
  placeholder:'记得留下你的昵称及邮箱，以便收到答复~',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By Machine</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://machine4869.gitee.io/">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="215,215,215" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>